{"version":3,"sources":["webpack:///src/components/validateNews/index.vue","webpack:///./src/components/validateNews/index.vue?ddf1","webpack:///./src/components/validateNews/index.vue","webpack:///src/views/SystemNews.vue","webpack:///./src/views/SystemNews.vue?09f4","webpack:///./src/views/SystemNews.vue"],"names":["validateNews","props","data","validateNewsTips","src_const","IMG_URL","filterType","filterStatus","isAdding","computed","outcomteList","_this","this","validateNewsList","filter","item","validateType","status","systemValidateUsers","$store","state","app","sysUsers","code","userInfo","user","device","deviceType","methods","agreeValidate","_this2","$socket","emit","dispatch","setTimeout","$emit","$alert","confirmButtonText","mounted","roomid","_id","count","type","constants","clear","components_validateNews","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","placeholder","model","value","callback","$$v","expression","label","_s","length","_l","key","time","effect","content","placement","to","senderNickname","slice","applyFriend","applyGroup","groupId","title","_e","width","trigger","directives","name","rawName","size","src","senderAvatar","on","error","additionMessage","plain","click","$event","slot","staticRenderFns","SystemNews","fetchMyValidateNews","asyncToGenerator_default","regenerator_default","a","mark","_callee","id","_ref","wrap","_context","prev","next","$http","getMyValidateNews","sent","console","log","stop","changeValidateNewsStatus","senderId","reveiverId","forEach","components","__webpack_require__","normalizeComponent","ssrContext","sockets","receiveValidateMessage","concat","toConsumableArray_default","created","views_SystemNews","style","SystemNews_Component","SystemNews_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/9.2c6017b0584ca45244a5.js","sourcesContent":["<template>\r\n  <div class=\"validatenews-com\">\r\n    <div class=\"wrapper\">\r\n      <div class=\"title\">验证消息</div>\r\n      <div class=\"filter\">\r\n        <el-tag type=\"info\">选择过滤条件：</el-tag>\r\n        <el-select v-model=\"filterType\" placeholder=\"请选择\">\r\n          <el-option\r\n            label=\"群\"\r\n            :value=\"1\" />\r\n          <el-option\r\n            label=\"好友\"\r\n            :value=\"0\" />\r\n        </el-select>\r\n        <el-select v-model=\"filterStatus\" placeholder=\"请选择\">\r\n          <el-option\r\n            label=\"全部\"\r\n            :value=\"-1\" />\r\n          <el-option\r\n            label=\"未处理\"\r\n            :value=\"0\" />\r\n          <el-option\r\n            label=\"已同意\"\r\n            :value=\"1\" />\r\n          <el-option\r\n            label=\"已拒绝\"\r\n            :value=\"2\" />\r\n        </el-select>\r\n      </div>\r\n      <div class=\"counter\">\r\n        <span>\r\n          一共{{outcomteList.length}}条记录\r\n        </span>\r\n      </div>\r\n      <!-- <div class=\"validatenews-item\"> -->\r\n      <div class=\"validatenews-item\" v-for=\"item in outcomteList\" :key=\"item.time\">\r\n        <div class=\"apply-info\">\r\n          <span class=\"title\">\r\n            <el-tooltip class=\"item\" effect=\"dark\" content=\"点击查看用户主页\" placement=\"top\">\r\n              <span class=\"nickname\">\r\n                <router-link :to=\"`/user/${item.senderId}`\" class=\"\">\r\n                  {{item.senderNickname.slice(0,10)}}\r\n                </router-link>\r\n              </span>\r\n            </el-tooltip>\r\n            <!-- {{item.validateType === 0 ? validateNewsTips.applyFriend}} -->\r\n            <span v-if=\"item.validateType === 0\">\r\n              {{validateNewsTips.applyFriend}}\r\n            </span>\r\n            <span v-else-if=\"item.validateType === 1\">\r\n              {{validateNewsTips.applyGroup}}：{{item.groupId && item.groupId.title}}\r\n            </span>\r\n            <span class=\"time\">\r\n              {{item.time}}\r\n            </span>\r\n          </span>\r\n        </div>\r\n        <div class=\"go-operation\">\r\n          <el-popover\r\n            placement=\"left\"\r\n            width=\"300\"\r\n            trigger=\"click\">\r\n            <div class=\"validate-popover-body\" v-loading=\"isAdding\">\r\n              <div class=\"sender-info\">\r\n                <el-avatar :size=\"60\" :src=\"IMG_URL + item.senderAvatar\" @error=\"()=>true\">\r\n                  <img src=\"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png\"/>\r\n                </el-avatar>\r\n                <div class=\"info\">\r\n                  <span class=\"nickname\">{{item.senderNickname}}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"addition\">\r\n                <el-tag size=\"mini\" type=\"info\">附加消息：</el-tag>\r\n                <div class=\"content\">\r\n                  <span>{{item.additionMessage}}</span>\r\n                </div>\r\n              </div>\r\n              <!-- <div class=\"operation\"> -->\r\n              <div class=\"operation\" v-if=\"item.status === 0\">\r\n                <el-button type=\"success\" plain size=\"small\" @click=\"agreeValidate(item)\">同意</el-button>\r\n                <el-button type=\"danger\" plain size=\"small\">拒绝</el-button>\r\n              </div>\r\n              <div class=\"operation\" v-else-if=\"item.status === 1\">\r\n                <el-tag type=\"success\">已同意</el-tag>\r\n              </div>\r\n              <div class=\"operation\" v-else-if=\"item.status === 2\">\r\n                <el-tag type=\"danger\">已拒绝</el-tag>\r\n              </div>\r\n            </div>\r\n            <el-button slot=\"reference\" type=\"success\">查看</el-button>\r\n          </el-popover>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { SET_UNREAD_NEWS_TYPE_MAP } from '@/store/constants'\r\nimport { validateNewsTips } from '@/const'\r\nexport default {\r\n  props: ['validateNewsList'],\r\n  data() {\r\n    return {\r\n      validateNewsTips,\r\n      IMG_URL: process.env.IMG_URL,\r\n      filterType: 0, // 0人，1群\r\n      filterStatus: 0, // -1全部，0未处理，1已同意，2已拒绝\r\n      isAdding: false\r\n    }\r\n  },\r\n  computed: {\r\n    outcomteList() {\r\n      return this.validateNewsList.filter(item => {\r\n        if (this.filterStatus === -1) {\r\n          return item.validateType === this.filterType\r\n        } else {\r\n          return item.status === this.filterStatus && item.validateType === this.filterType\r\n        }\r\n      })\r\n    },\r\n    systemValidateUsers() {\r\n      return this.$store.state.app.sysUsers.filter(item => item.code === \"111111\")[0]\r\n    },\r\n    userInfo() {\r\n      return this.$store.state.user.userInfo\r\n    },\r\n    device() {\r\n      return this.$store.state.device.deviceType\r\n    }\r\n  },\r\n  methods: {\r\n    agreeValidate(item) {\r\n      if (item.validateType === 0) {\r\n        this.$socket.emit('sendAgreeFriendValidate', item)\r\n      } else if (item.validateType === 1) {\r\n        this.$socket.emit('sendAgreeGroupValidate', item)        \r\n      }\r\n      this.$store.dispatch('app/SET_AGREE_FRIEND_VALIDATE', true)\r\n      this.isAdding = true\r\n      setTimeout(() => {\r\n        this.isAdding = false\r\n        this.$emit('changeValidateNewsStatus', item, 1)\r\n        this.$alert('添加成功', '提示！', {\r\n          confirmButtonText: '确定'\r\n        });\r\n      }, 500)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$store.dispatch('news/SET_UNREAD_NEWS', {\r\n      roomid: this.systemValidateUsers._id + '-' + this.userInfo._id,\r\n      count: 0,\r\n      type: SET_UNREAD_NEWS_TYPE_MAP.clear\r\n    })\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.validate-popover-body {\r\n  .sender-info {\r\n    display: flex;\r\n    align-items: center;\r\n    .info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      margin-left: 10px;\r\n      .nickname {\r\n        font-size: 20px;\r\n        color: #3578E5;\r\n      }\r\n    }\r\n  }\r\n  .addition {\r\n    margin: 17px 0;\r\n    .content {\r\n      margin-top: 5px;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .operation {\r\n    text-align: right;\r\n  }\r\n}\r\n.validatenews-com {\r\n  background-color: #fff;\r\n  width: 100%;\r\n  height: 95%;\r\n  overflow-x: hidden;\r\n  .wrapper {\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    .filter {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 10px 0;\r\n      * {\r\n        padding: 0 5px;\r\n      }\r\n    }\r\n    .counter {\r\n      padding: 10px 0;\r\n    }\r\n    .validatenews-item {\r\n      padding: 10px 0;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      border-top: 1px solid #C0C4CC;\r\n      &:last-child {\r\n        border-bottom: 1px solid #C0C4CC;\r\n      }\r\n      .apply-info {\r\n        .title {\r\n          line-height: 20px;\r\n          .nickname {\r\n            display: inline-block;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/validateNews/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"validatenews-com\"},[_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"验证消息\")]),_vm._v(\" \"),_c('div',{staticClass:\"filter\"},[_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(\"选择过滤条件：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.filterType),callback:function ($$v) {_vm.filterType=$$v},expression:\"filterType\"}},[_c('el-option',{attrs:{\"label\":\"群\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"好友\",\"value\":0}})],1),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.filterStatus),callback:function ($$v) {_vm.filterStatus=$$v},expression:\"filterStatus\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":-1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"未处理\",\"value\":0}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"已同意\",\"value\":1}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"已拒绝\",\"value\":2}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"counter\"},[_c('span',[_vm._v(\"\\n        一共\"+_vm._s(_vm.outcomteList.length)+\"条记录\\n      \")])]),_vm._v(\" \"),_vm._l((_vm.outcomteList),function(item){return _c('div',{key:item.time,staticClass:\"validatenews-item\"},[_c('div',{staticClass:\"apply-info\"},[_c('span',{staticClass:\"title\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击查看用户主页\",\"placement\":\"top\"}},[_c('span',{staticClass:\"nickname\"},[_c('router-link',{attrs:{\"to\":(\"/user/\" + (item.senderId))}},[_vm._v(\"\\n                \"+_vm._s(item.senderNickname.slice(0,10))+\"\\n              \")])],1)]),_vm._v(\" \"),(item.validateType === 0)?_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm.validateNewsTips.applyFriend)+\"\\n          \")]):(item.validateType === 1)?_c('span',[_vm._v(\"\\n            \"+_vm._s(_vm.validateNewsTips.applyGroup)+\"：\"+_vm._s(item.groupId && item.groupId.title)+\"\\n          \")]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"time\"},[_vm._v(\"\\n            \"+_vm._s(item.time)+\"\\n          \")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"go-operation\"},[_c('el-popover',{attrs:{\"placement\":\"left\",\"width\":\"300\",\"trigger\":\"click\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isAdding),expression:\"isAdding\"}],staticClass:\"validate-popover-body\"},[_c('div',{staticClass:\"sender-info\"},[_c('el-avatar',{attrs:{\"size\":60,\"src\":_vm.IMG_URL + item.senderAvatar},on:{\"error\":function (){ return true; }}},[_c('img',{attrs:{\"src\":\"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('span',{staticClass:\"nickname\"},[_vm._v(_vm._s(item.senderNickname))])])],1),_vm._v(\" \"),_c('div',{staticClass:\"addition\"},[_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"info\"}},[_vm._v(\"附加消息：\")]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('span',[_vm._v(_vm._s(item.additionMessage))])])],1),_vm._v(\" \"),(item.status === 0)?_c('div',{staticClass:\"operation\"},[_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){_vm.agreeValidate(item)}}},[_vm._v(\"同意\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\",\"size\":\"small\"}},[_vm._v(\"拒绝\")])],1):(item.status === 1)?_c('div',{staticClass:\"operation\"},[_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"已同意\")])],1):(item.status === 2)?_c('div',{staticClass:\"operation\"},[_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"已拒绝\")])],1):_vm._e()]),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"success\"},slot:\"reference\"},[_vm._v(\"查看\")])],1)],1)])})],2)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e95c502\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/validateNews/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e95c502\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e95c502\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/validateNews/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"system-page\" :style=\"device === 'Mobile' ? {width: '100%'} : {}\">\r\n    <p class=\"title\">我的系统消息</p>\r\n    <validate-news :validateNewsList=\"validateNewsList\" @changeValidateNewsStatus=\"changeValidateNewsStatus\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport validateNews from '@/components/validateNews'\r\nexport default {\r\n  name: \"System\",\r\n  data() {\r\n    return {\r\n      validateNewsList: []\r\n      // validateNewsList: [{\"_id\":\"5e37d26d01cc1f45685a7acf\",\"roomid\":\"5e366c6f6b00323a2446512b-5d9d929f49db3825a8e76a04\",\"senderId\":\"5e2eac0300a77529b8580ddd\",\"senderName\":\"123456\",\"senderNickname\":\"良牙03\",\"senderAvatar\":\"/img/picture.png\",\"reveiverId\":\"5d9d929f49db3825a8e76a04\",\"time\":\"2020-02-03 15:57:33\",\"additionMessage\":\"123123123123\",\"status\":1,\"validateType\":0,\"__v\":0},{\"_id\":\"5e3fa8b2721ba61d34dbda0e\",\"roomid\":\"5e366c6f6b00323a2446512b-5d9d929f49db3825a8e76a04\",\"senderId\":\"5dbec4dbf4972d5754d35d66\",\"senderName\":\"test\",\"senderNickname\":\"达也97\",\"senderAvatar\":\"/img/picture.png\",\"reveiverId\":\"5d9d929f49db3825a8e76a04\",\"time\":\"2020-02-09 14:37:38\",\"additionMessage\":\"你好\",\"status\":1,\"validateType\":0,\"__v\":0},{\"_id\":\"5e3fb0f3721ba61d34dbda0f\",\"roomid\":\"5e366c6f6b00323a2446512b-5d9d929f49db3825a8e76a04\",\"senderId\":\"5dbec4dbf4972d5754d35d66\",\"senderName\":\"test\",\"senderNickname\":\"达也97\",\"senderAvatar\":\"/img/picture.png\",\"reveiverId\":\"5d9d929f49db3825a8e76a04\",\"time\":\"2020-02-09 15:12:51\",\"additionMessage\":\"123\",\"status\":1,\"validateType\":0,\"__v\":0},{\"_id\":\"5e3fb779721ba61d34dbda11\",\"roomid\":\"5e366c6f6b00323a2446512b-5d9d929f49db3825a8e76a04\",\"senderId\":\"5dc8277865b0e64374cccf12\",\"senderName\":\"chen2\",\"senderNickname\":\"童虎1c\",\"senderAvatar\":\"/img/picture.png\",\"reveiverId\":\"5d9d929f49db3825a8e76a04\",\"time\":\"2020-02-09 15:40:41\",\"additionMessage\":\"你好\",\"status\":1,\"validateType\":0,\"__v\":0},{\"_id\":\"5e3fb781721ba61d34dbda12\",\"roomid\":\"5e366c6f6b00323a2446512b-5d9d929f49db3825a8e76a04\",\"senderId\":\"5dc8277865b0e64374cccf12\",\"senderName\":\"chen2\",\"senderNickname\":\"童虎1c\",\"senderAvatar\":\"/img/picture.png\",\"reveiverId\":\"5d9d929f49db3825a8e76a04\",\"time\":\"2020-02-09 15:40:49\",\"additionMessage\":\"你好2\",\"status\":1,\"validateType\":0,\"__v\":0}]\r\n    }\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.user.userInfo\r\n    },\r\n    device() {\r\n      return this.$store.state.device.deviceType\r\n    }\r\n  },\r\n  methods: {\r\n    async fetchMyValidateNews() {\r\n      const { _id: id } = this.userInfo\r\n      const { data } = await this.$http.getMyValidateNews({id})\r\n      const { data: validateNewsList, status } = data\r\n      console.log(data)\r\n      if (status === 2000) {\r\n        this.validateNewsList = validateNewsList\r\n      }\r\n    },\r\n    changeValidateNewsStatus(item, status) {\r\n      console.log(item, status)\r\n      const { roomid, senderId, reveiverId } = item\r\n      this.validateNewsList.forEach(item => {\r\n        if (item.roomid === roomid && item.senderId === senderId && item.reveiverId === reveiverId ) {\r\n          item.status = status\r\n        }\r\n      })\r\n      // this.fetchMyValidateNews()\r\n    }\r\n  },\r\n  components: {\r\n    validateNews\r\n  },\r\n  sockets: {\r\n    receiveValidateMessage(data) {\r\n      console.log('在system页面接收新的验证消息：', data)\r\n      this.validateNewsList = [...this.validateNewsList, data]\r\n    }\r\n  },\r\n  created() {\r\n    // this.$http.getMyValidateNews()\r\n    this.fetchMyValidateNews()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.system-page {\r\n  .title {\r\n    margin-top: 0;\r\n  }\r\n  width: 70%;\r\n  height: 100%;\r\n  margin: 0 auto;\r\n  padding: 20px 10px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/SystemNews.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"system-page\",style:(_vm.device === 'Mobile' ? {width: '100%'} : {})},[_c('p',{staticClass:\"title\"},[_vm._v(\"我的系统消息\")]),_vm._v(\" \"),_c('validate-news',{attrs:{\"validateNewsList\":_vm.validateNewsList},on:{\"changeValidateNewsStatus\":_vm.changeValidateNewsStatus}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2dd34e2e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/SystemNews.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dd34e2e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SystemNews.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SystemNews.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SystemNews.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2dd34e2e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SystemNews.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/SystemNews.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}