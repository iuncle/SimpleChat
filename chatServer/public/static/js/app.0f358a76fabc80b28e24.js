webpackJsonp([14],{"0xDb":function(e,t,n){"use strict";t.j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=h(e.getFullYear()),o=h(e.getMonth()+1),r=h(e.getDate()),s=h(e.getHours()),i=h(e.getMinutes()),a=h(e.getSeconds());return t?n+"-"+o+"-"+r+" "+s+":"+i+":"+a:n+"-"+o+"-"+r},t.n=function(){return!0},n.d(t,"b",function(){return y}),n.d(t,"p",function(){return w}),t.h=b,n.d(t,"i",function(){return _}),t.f=function(e,t){var n=void 0;return function(){for(var o=this,r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(function(){e.apply(o,s)},t)}},n.d(t,"q",function(){return C}),n.d(t,"r",function(){return S}),t.m=function(){var e=Date.now().toString(16),t=Math.floor(100*Math.random());return"co-messger-"+e+"-"+t},n.d(t,"s",function(){return I}),n.d(t,"c",function(){return M}),n.d(t,"g",function(){return F}),n.d(t,"a",function(){return z}),n.d(t,"o",function(){return A}),n.d(t,"l",function(){return x}),t.k=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.d=function(e){var t=e.toLowerCase();if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var n="#",o=1;o<4;o+=1)n+=t.slice(o,o+1).concat(t.slice(o,o+1));t=n}for(var r=[],s=1;s<7;s+=2)r.push(parseInt("0x"+t.slice(s,s+2)));return{r:r[0],g:r[1],b:r[2]}}return},t.e=function(e){var t=e/1e3/60/60,n=Math.ceil(t);return n>8?8:n};var o=n("d7EF"),r=n.n(o),s=n("//Fk"),i=n.n(s),a=n("pFYg"),u=n.n(a),c=n("Zrlr"),l=n.n(c),d=n("wxAW"),f=n.n(d),p=n("Gu7T"),g=n.n(p),m=n("mvHQ"),v=n.n(m);function h(e){var t;if((t="Number",function(e){return Object.prototype.toString.call(e)==="[object "+t+"]"})(e))return e>=10?String(e):"0"+String(e)}var y=/^[\w\d_]{3,6}/,w=/^[\w\d]{6,14}/;function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",n=h(e.getFullYear()),o=h(e.getMonth()+1),r=h(e.getDate()),s=h(e.getHours()),i=h(e.getMinutes()),a=h(e.getSeconds());return"YYYY-MM-DD HH-MM-SS"===t?n+"-"+o+"-"+r+" "+s+":"+i+":"+a:"YYYY-MM-DD"===t?n+"-"+o+"-"+r:"YYYY-MM"===t?n+"-"+o:"HH-MM-SS"===t?s+":"+i+":"+a:"HH"===t?""+s:void 0}var _=function(e){var t=new Date(e),n=(new Date(b(new Date)).getTime()-new Date(b(t)).getTime())/864e5,o=(new Date).getFullYear()-t.getFullYear(),r=t.getFullYear()+"年",s=h(t.getMonth()+1)+"月"+h(t.getDate())+"日",i=h(t.getHours())+":"+h(t.getMinutes());return n<1?i:1<=n&&n<2?"昨天 "+i:o<1?s+" "+i:r+s+" "+i};var C=function(e){e=v()(e),window.localStorage.setItem("friends",e)},S=function(e){e=v()(e),window.localStorage.setItem("groups",e)};var I=function(e){var t,n,o;"FRIEND"===e.conversationType?(t=e._id,n=window.localStorage,(o=n.getItem("coMessager-recentConversation-friend")||"").split(",").includes(t)||(o=o?o+","+t:t,n.setItem("coMessager-recentConversation-friend",o))):"GROUP"===e.conversationType&&function(e){var t=window.localStorage,n=t.getItem("coMessager-recentConversation-group")||"";n.split(",").includes(e)||(n=n?n+","+e:e,t.setItem("coMessager-recentConversation-group",n))}(e.groupId._id)},M=function(e){return[].concat(g()(e)).reduce(function(e,t){return!e.includes(t)&&e.push(t),e},[])},F=function(e,t){for(var n=e;null!==n&&n!==document;){if(n.classList.contains(t))return n;n=n.parentNode}},z=function(){function e(){l()(this,e)}return f()(e,[{key:"getJson",value:function(e){var t=window.localStorage.getItem(e)||"null";return JSON.parse(t)}},{key:"getStr",value:function(e){return window.localStorage.getItem(e)}},{key:"set",value:function(e,t){var n="object"===(void 0===t?"undefined":u()(t))?v()(t):t;window.localStorage.setItem(e,n)}}]),e}(),A=function(e){var t=["jpeg","png","gif","jpg"];return new i.a(function(n,o){var s=r()(e.files,1)[0],i=s.type&&s.type.split("/")[1],a=s.size/1024/1024;t.includes(i)||o("只能上传图片！"),a>.5&&o("只能上传小于0.5M的图片！"),console.log(s);var u=new FileReader;u.readAsDataURL(s),u.onload=function(e){var t=e.target.result;n(t)},u.onerror=function(){o("上传失败！")}})},x=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile":"Desktop"}},"9W+Z":function(e,t,n){"use strict";var o={data:function(){return{avatarList:[],IMG_URL:"http://47.106.175.18:9000/"}},computed:{device:function(){return this.$store.state.device.deviceType}},methods:{close:function(){this.$emit("close")},choose:function(e){console.log("ok"),this.$emit("choose",e),this.$emit("close")}},mounted:function(){var e=this;this.$http.getFaceImgs().then(function(t){console.log(t),e.avatarList=t.data.data})}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"avatar-choose-cmp all0"},[n("div",{staticClass:"avatar-list hor-ver-center",style:"Mobile"===e.device?{width:"90%"}:{}},[n("i",{staticClass:"el-icon-close p-r-t",on:{click:e.close}}),e._v(" "),n("span",{staticClass:"p-l-t"},[e._v("选择头像")]),e._v(" "),e._l(e.avatarList,function(t,o){return n("div",{key:o,staticClass:"avatar-item box-shadow1",on:{click:function(n){e.choose("face/"+t)}}},[n("img",{attrs:{width:"80",height:"80",src:e.IMG_URL+"face/"+t,alt:"",srcset:""}})])})],2)])},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(e){n("mlBV")},null,null);t.a=s.exports},G9ow:function(e,t){},JLgs:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("fZjL"),r=n.n(o),s=n("7+uW"),i=n("zL8q"),a=n.n(i),u=n("/IwO"),c=n.n(u),l=(n("tvR6"),n("HI0L")),d=n.n(l),f=n("xzgZ"),p=n.n(f),g=n("OS1Z"),m=n.n(g),v=(n("uMhA"),n("pw1w"),n("cVXI"),{render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"user-profile all0"},[t("p",[this._v("\n    userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  userProfile\n  ")])])}]});var h=n("VU/8")(null,v,!1,function(e){n("G9ow")},null,null).exports,y=n("Xxa5"),w=n.n(y),b=n("exGp"),_=n.n(b),C={props:["currentConversation"],data:function(){return{selectFenzu:"",confirmLoading:!1,isShowAddFenzu:!1}},computed:{userInfo:function(){return this.$store.state.user.userInfo},fenzuKeys:function(){return r()(this.userInfo.friendFenzu)},currentFenzu:function(){var e=this,t=this.userInfo.friendFenzu,n="";return this.fenzuKeys.forEach(function(o){(t[o]||[]).includes(e.currentConversation._id)&&(n=o)}),n}},methods:{modifyFenzu:function(){var e=this;return _()(w.a.mark(function t(){var n,o;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selectFenzu){t.next=2;break}return t.abrupt("return");case 2:return e.confirmLoading=!0,n={userId:e.userInfo._id,friendId:e.currentConversation._id,newFenzu:e.selectFenzu},t.next=6,e.$http.modifyuserfenzu(n);case 6:if(2e3!==t.sent.data.status){t.next=13;break}return t.next=10,e.$http.getUserInfo(e.userInfo._id);case 10:o=t.sent,e.$store.dispatch("user/LOGIN",o.data.data),e.confirmLoading=!1;case 13:case"end":return t.stop()}},t,e)}))()},close:function(){this.$emit("hidden-fenzu")},showAddFenzu:function(){this.isShowAddFenzu=!0},closeAddFenzu:function(){this.isShowAddFenzu=!1},addFenzu:function(){},test:function(){console.log(123)}},mounted:function(){this.selectFenzu=this.currentFenzu}},S={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fenzhu-modal-cmp all0"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmLoading,expression:"confirmLoading"}],staticClass:"switch-fenzu hor-ver-center"},[n("div",{staticClass:"header"},[n("span",{staticClass:"p-l-t el-icon-circle-plus-outline",on:{click:e.showAddFenzu}},[n("span",{staticClass:"secondary-font"},[e._v("点击添加分组")])]),e._v(" "),n("span",{staticClass:"p-r-t el-icon-close",on:{click:e.close}})]),e._v(" "),n("div",{staticClass:"fenzu-list"},[n("el-radio-group",{on:{change:e.modifyFenzu},model:{value:e.selectFenzu,callback:function(t){e.selectFenzu=t},expression:"selectFenzu"}},e._l(e.fenzuKeys,function(t,o){return n("el-radio",{key:o,staticClass:"item",attrs:{label:t},model:{value:e.selectFenzu,callback:function(t){e.selectFenzu=t},expression:"selectFenzu"}},[e._v("\n          "+e._s(t)+"（"+e._s(e.userInfo.friendFenzu[t].length)+"）\n          ")])}))],1)]),e._v(" "),n("el-dialog",{attrs:{title:"添加分组",visible:e.isShowAddFenzu,width:"30%"},on:{close:e.closeAddFenzu}},[n("el-input"),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addFenzu}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var I=n("VU/8")(C,S,!1,function(e){n("ry+G")},null,null).exports,M={props:["currentConversation"],data:function(){return{confirmLoading:!1,beizhu:this.currentConversation.beizhu}},computed:{userInfo:function(){return this.$store.state.user.userInfo}},methods:{ok:function(){var e=this;return _()(w.a.mark(function t(){var n,o;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.confirmLoading=!0,n={userId:e.userInfo._id,friendId:e.currentConversation._id,friendBeizhu:e.beizhu},t.next=4,e.$http.modifyFriendBeizhu(n);case 4:return t.next=6,e.$http.getUserInfo(e.userInfo._id);case 6:o=t.sent,e.$store.dispatch("user/LOGIN",o.data.data),e.$eventBus.$emit("toggleBeizhuModal",{show:!1,data:{}}),e.confirmLoading=!1;case 10:case"end":return t.stop()}},t,e)}))()},close:function(){this.$eventBus.$emit("toggleBeizhuModal",{show:!1,data:{currentConversation:{}}})}}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"beizhu-modal-cmp all0"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.confirmLoading,expression:"confirmLoading"}],staticClass:"beizhu hor-ver-center"},[n("span",{staticClass:"p-r-t el-icon-close",on:{click:e.close}}),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"body"},[n("el-input",{model:{value:e.beizhu,callback:function(t){e.beizhu=t},expression:"beizhu"}})],1),e._v(" "),n("div",{staticClass:"footer"},[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.ok}},[e._v("确认")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.close}},[e._v("取消")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("span",{staticClass:"title"},[this._v("修改备注姓名")])])}]};var z=n("VU/8")(M,F,!1,function(e){n("tNFE")},null,null).exports,A={data:function(){return{groupForm:{title:"",desc:"",avatar:"face/face1.jpg"},rules:{title:[{required:!0,message:"必填",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],desc:[{min:8,max:20,message:"长度在 8 到 20 个字符",trigger:"blur"}]},showChooseAvatar:!1,IMG_URL:"http://47.106.175.18:9000/"}},computed:{userInfo:function(){return this.$store.state.user.userInfo}},methods:{create:function(){var e=this;return _()(w.a.mark(function t(){var n,o,r,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={title:e.groupForm.title,desc:e.groupForm.desc,img:e.groupForm.avatar,holderName:e.userInfo.name,holderUserId:e.userInfo._id},t.next=3,e.$http.createGroup(n);case 3:o=t.sent,r=o.data,console.log(r),e.$eventBus.$emit("toggleCreateGroup",{show:!1}),2e3===r.status?(s=r.data.groupData,e.$eventBus.$emit("createGroupSuccess"),e.$alert("创建成功！群号是"+s[0].code+"。","提示")):e.$message({type:"error",message:"创建群失败！"});case 8:case"end":return t.stop()}},t,e)}))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.create()})},resetForm:function(e){this.$refs[e].resetFields()},setShowChooseAvatar:function(e){this.showChooseAvatar=e},chooseAvatar:function(e){this.groupForm.avatar=e}},components:{avatarChoose:n("9W+Z").a}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"create-group-cmp"},[n("div",{staticClass:"create-content"},[e.showChooseAvatar?n("avatar-choose",{on:{close:function(t){e.setShowChooseAvatar(!1)},choose:e.chooseAvatar}}):e._e(),e._v(" "),n("el-form",{ref:"groupForm",attrs:{"label-position":"top",model:e.groupForm,rules:e.rules}},[n("el-form-item",{staticClass:"avatar-form",attrs:{label:"群头像（点击头像可切换）",required:""}},[n("el-avatar",{attrs:{size:50,src:e.IMG_URL+e.groupForm.avatar},nativeOn:{click:function(t){e.setShowChooseAvatar(!0)}}})],1),e._v(" "),n("el-form-item",{attrs:{label:"群名称",prop:"title",required:""}},[n("el-input",{attrs:{autocomplete:"on"},model:{value:e.groupForm.title,callback:function(t){e.$set(e.groupForm,"title",t)},expression:"groupForm.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"群描述",prop:"desc"}},[n("el-input",{attrs:{autocomplete:"on"},model:{value:e.groupForm.desc,callback:function(t){e.$set(e.groupForm,"desc",t)},expression:"groupForm.desc"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.submitForm("groupForm")}}},[e._v("提交")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(t){e.resetForm("groupForm")}}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]};var T=n("VU/8")(A,x,!1,function(e){n("JLgs")},null,null).exports,N={props:{title:{type:String},width:{type:Number,default:300},showFooter:{type:Boolean,deafult:!1}},methods:{close:function(){this.$emit("close")}}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bearing-modal all0"},[n("div",{staticClass:"bearing-modal-content hor-ver-center",style:{width:e.width+"px"}},[n("div",{staticClass:"header"},[n("span",[e._v(e._s(e.title))]),e._v(" "),n("i",{staticClass:"el-icon-close p-r-t",on:{click:e.close}})]),e._v(" "),n("div",{staticClass:"body"},[e._t("body")],2),e._v(" "),e.showFooter?n("div",{staticClass:"footer"}):e._e()])])},staticRenderFns:[]};var L=n("VU/8")(N,E,!1,function(e){n("sk7Q")},null,null).exports,$={props:{message:{type:Object},top:{type:Number},left:{type:Number}},methods:{copy:function(){console.log("copy copy")},handlerHiddhen:function(e){var t=this;e.target.classList.contains("menu-item")?setTimeout(function(){t.$eventBus.$emit("toggleMsgTextMenu",{show:!1,data:{},left:0,top:0})},500):this.$eventBus.$emit("toggleMsgTextMenu",{show:!1,data:{},left:0,top:0})}},mounted:function(){window.addEventListener("mousedown",this.handlerHiddhen)},beforeDestroy:function(){window.removeEventListener("mousedown",this.handlerHiddhen)}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-text__menu box-shadow1",style:{top:e.top+"px",left:e.left+"px"}},[n("span",{directives:[{name:"copy",rawName:"v-copy",value:e.message.message,expression:"message.message"}],staticClass:"menu-item operation-text",on:{mousedown:e.copy}},[e._v("复制")]),e._v(" "),n("span",{staticClass:"menu-item operation-text"},[e._v("收藏")]),e._v(" "),n("span",{staticClass:"menu-item operation-text"},[e._v("删除")]),e._v(" "),n("span",{staticClass:"menu-item operation-text"},[e._v("加入代办")])])},staticRenderFns:[]};var O={data:function(){return{showModal:!1,isShowUserProfile:!1,isShowFenzuModal:!1,isShowBeizhuModal:!1,isShowCreateGroup:!1,isShowMsgTextMenu:!1,currentConversation:{},currentMessage:{},msgTextMenuLeft:0,msgTextMenuTop:0}},methods:{hiddenFenzuModal:function(){this.isShowFenzuModal=!1},close:function(){this.showModal=!1}},created:function(){var e=this;this.$eventBus.$on("showUserProfile",function(){e.isShowUserProfile=!0}),this.$eventBus.$on("toggleFenzuModal",function(t){var n=t.show,o=t.data;e.isShowFenzuModal=n,e.currentConversation=o.currentConversation||{}}),this.$eventBus.$on("toggleBeizhuModal",function(t){var n=t.show,o=t.data;e.isShowBeizhuModal=n,e.currentConversation=o.currentConversation||{}}),this.$eventBus.$on("toggleCreateGroup",function(t){var n=t.show;e.showModal=n,e.isShowCreateGroup=n}),this.$eventBus.$on("toggleMsgTextMenu",function(t){var n=t.show,o=t.data,r=t.left,s=t.top;e.isShowMsgTextMenu=n,e.currentMessage=o,e.msgTextMenuLeft=r,e.msgTextMenuTop=s})},components:{userProfile:h,fenzuModal:I,beizhuModal:z,createGroup:T,messageTextMenu:n("VU/8")($,k,!1,function(e){n("efOk")},null,null).exports,bearingModal:L}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pop-ups"},[e.isShowUserProfile?n("user-profile"):e._e(),e._v(" "),e.isShowFenzuModal?n("fenzu-modal",{attrs:{"current-conversation":e.currentConversation},on:{"hidden-fenzu":e.hiddenFenzuModal}}):e._e(),e._v(" "),e.isShowBeizhuModal?n("beizhu-modal",{attrs:{"current-conversation":e.currentConversation}}):e._e(),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.showModal&&e.isShowCreateGroup?n("bearing-modal",{attrs:{title:"创建群聊",width:400},on:{close:function(t){e.$eventBus.$emit("toggleCreateGroup",{show:!1})}}},[n("template",{slot:"body"},[n("create-group")],1)],2):e._e()],1),e._v(" "),e.isShowMsgTextMenu?n("message-text-menu",{attrs:{message:e.currentMessage,left:e.msgTextMenuLeft,top:e.msgTextMenuTop}}):e._e()],1)},staticRenderFns:[]},R={name:"App",data:function(){return{include:["Layout"],exclude:["Login","NotFound"]}},watch:{$route:function(e,t){var n=this.exclude;if("Login"===e.name)!n.includes("Layout")&&n.push("Layout");else{var o=n.indexOf("Layout");-1!==o&&n.splice(o,1)}}},components:{popUps:n("VU/8")(O,U,!1,null,null,null).exports}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",{attrs:{exclude:this.exclude}},[t("router-view")],1),this._v(" "),t("pop-ups")],1)},staticRenderFns:[]},B=n("VU/8")(R,q,!1,null,null,null).exports,D=n("/ocq"),P=n("NYxO"),G=n("mvHQ"),V=n.n(G),j=n("//Fk"),Y=n.n(j),H=n("mtWM"),J=n.n(H),W=n("0xDb"),Z=n("q2Iq"),K=J.a.create({timeout:7e3,baseURL:"/"});K.interceptors.request.use(function(e){var t=Object(Z.a)();return t&&(e.headers.Authorization=t),e},function(e){Y.a.reject(e)}),K.interceptors.response.use(function(e){return 1e3===e.data.status&&Object(Z.c)(e.data.token),2002===e.data.status?(Object(i.Message)({message:"请先登录",type:"warning",duration:3e3}),Le.push("/login")):2003===e.data.status?Object(i.Message)({message:"服务端错误,请稍后重试",type:"error",duration:3e3}):1006===e.data.status?(Object(i.Message)({message:"登录过期",type:"warning",duration:3e3}),Object(Z.b)(),Le.push("/login")):1007===e.data.status&&Object(i.Message)({message:"验证码过期！",type:"warning",duration:3e3}),e},function(e){return console.log("请求错误",e),Object(i.Message)({message:"网络超时！",type:"error",duration:3e3}),Y.a.reject(e)});var X=K,Q=n("Dd8w"),ee=n.n(Q),te={getMyFriends:function(e){return X.get(ce+"/friendly/myfriends?id="+e)},getRecentConversationList:function(e){return X.post(ce+"/friendly/recentconversation",e)},deleteFriend:function(e){return X.post(ce+"/friendly/deltefriend",e)}},ne={getMyGroup:function(e){var t=e.userName;return X.get(ce+"/group/getmygroup?userName="+t)},getGroupInfo:function(e){var t=e.id;return X.get(ce+"/group/groupinfo?id="+t)},preFetchGroup:function(e){var t=e.type,n=e.q,o=e.page,r=e.pageSize;return X.get(ce+"/group/prefetchgroup?type="+t+"&q="+n+"&page="+o+"&pageSize="+r)},createGroup:function(e){return X.post(ce+"/group/create",e)},getRecentGroupConversation:function(e){return X.post(ce+"/group/recent",e)},getRecentGroupNews:function(e){var t=e.roomid,n=e.page,o=e.pageSize;return X.get(ce+"/groupnews/recentnews?roomid="+t+"&page="+n+"&pageSize="+o)},getGroupHistoryMsg:function(e){return X.post(ce+"/groupnews/historymsg",e)},getGroupLastNews:function(e){return X.post(ce+"/groupnews/lastnews",e)}},oe={getRecentNews:function(e){var t=e.roomid,n=e.page,o=e.pageSize;return X.get(ce+"/news/recent?roomid="+t+"&page="+n+"&pageSize="+o)},getLastNews:function(e){return X.post(ce+"/news/last",e)},userIsReadMsg:function(e){return X.post(ce+"/news/isread",e)},getHistoryMsg:function(e){return X.post(ce+"/news/historymsg",e)}},re={getSysUsers:function(){return X.get(ce+"/sys/sysusers")},getQiniuToken:function(){return X.get(ce+"/sys/qiniutoken")},getWeather:function(e){return X.get("http://wthrcdn.etouch.cn/weather_mini?city="+e)},getFaceImgs:function(){return X.get(ce+"/sys/faceimg")},uploadFile:function(e){return X.post(ce+"/sys/upfile",e)}},se={getMyValidateNews:function(e){var t=e.id;return X.get(ce+"/validate/myvalidatenews?id="+t)}},ie={publishPyqNews:function(e){return X.post(ce+"/pyq/publishpyqnews",e)},getFriendlyPyq:function(e){var t=e.id,n=e.page,o=e.pageSize;return X.get(ce+"/pyq/getfridenlypyq?id="+t+"&page="+n+"&pageSize="+o)},doLike:function(e){return X.post(ce+"/pyq/like",e)},doComment:function(e){return X.post(ce+"/pyq/comment",e)},deletePyqItem:function(e){return X.post(ce+"/pyq/deletepyq",e)},getPyqItemInfo:function(e){var t=e.pyqId,n=e.userId;return X.get(ce+"/pyq/pyqinfo?pyqId="+t+"&userId="+n)},modifyPyqItem:function(e){return X.post(ce+"/pyq/pyqmodify",e)},getUserPyq:function(e){return X.post(ce+"/pyq/getuserpyq",e)}},ae={login:function(e){return X.post(ce+"/user/login",e)},getCVCode:function(){return X.get(ce+"/user/getcode")},register:function(e){return X.post(ce+"/user/register",e)},getUserInfo:function(e){return X.get(ce+"/user/userinfo?id="+e)},preFetchUser:function(e){var t=e.type,n=e.q,o=e.page,r=e.pageSize;return X.get(ce+"/user/prefetchuser?type="+t+"&q="+n+"&page="+o+"&pageSize="+r)},addNewFenzu:function(e){return X.post(ce+"/user/addfenzu",e)},modifyuserfenzu:function(e){return X.post(ce+"/user/modifyuserfenzu",e)},modifyFriendBeizhu:function(e){return X.post(ce+"/user/modifyfriendbeizhu",e)},deleteFenzu:function(e){return X.post(ce+"/user/delfenzu",e)},editFeznu:function(e){return X.post(ce+"/user/editfenzu",e)},updateUserInfo:function(e){return X.post(ce+"/user/updateUserInfo",e)},updateUserPwd:function(e){return X.post(ce+"/user/updateUserPwd",e)}},ue={publishBlog:function(e){return X.post(ce+"/blog/publish",e)},getBlogList:function(e){return X.post(ce+"/blog/getBlogList",e)},getBlogInfo:function(e){return X.get(ce+"/blog/getBlogInfo?id="+e)},getBlogCategory:function(){return X.get(ce+"/blog/getBlogCategory")},getBlogTag:function(e){return X.get(ce+"/blog/getBlogTag?cateId="+e)}},ce="api/v1",le=ee()({},ae,te,ne,oe,re,se,ie,ue),de={namespaced:!0,state:{isLogin:JSON.parse(window.sessionStorage.getItem("isLogin")||"false"),userInfo:JSON.parse(window.localStorage.getItem("userInfo")||"{}")},mutations:{login:function(e,t){e.isLogin=!0,e.userInfo=t;var n=V()(t);window.localStorage.setItem("userInfo",n),window.sessionStorage.setItem("isLogin",!0)},logout:function(e){e.isLogin=!1,e.userInfo="",window.localStorage.setItem("userInfo",""),window.sessionStorage.setItem("isLogin",!1)}},actions:{LOGIN:function(e,t){(0,e.commit)("login",t)},LOGOUT:function(e,t){(0,e.commit)("logout",t)}}},fe=n("woOf"),pe=n.n(fe),ge=n("bOdI"),me=n.n(ge),ve=n("zvae"),he={namespaced:!0,state:{unreadNews:{},lastNews:{},userIsReadMsg:{}},mutations:{setUnreadNews:function(e,t){var n=t.roomid,o=t.count,r=t.type;if(r===ve.a.add){var s=void 0===e.unreadNews[n]?0:e.unreadNews[n],i=me()({},n,s+1);e.unreadNews=pe()({},e.unreadNews,i)}else if(r===ve.a.clear){var a=me()({},n,0);e.unreadNews=pe()({},e.unreadNews,a)}else{me()({},n,o);e.unreadNews=pe()({},e.unreadNews)}},setLastNews:function(e,t){if("init"===t.type)e.lastNews=t.res;else if("concat"===t.type)e.lastNews=pe()({},e.lastNews,t.res);else if("edit"===t.type){var n=t.res,o=n.roomid,r=n.news,s=me()({},o,r);e.lastNews=pe()({},e.lastNews,s)}else if("default"===t.type){var i=t.roomid;if(i in e.lastNews)return;var a=me()({},i,{time:Date.now(),messageType:"text",message:""});e.lastNews=pe()({},e.lastNews,a)}},setUserIsReadMsg:function(e,t){var n=t.roomid,o=t.status,r=ee()({},e.userIsReadMsg)||{};for(var s in r)r.hasOwnProperty(s)&&(r[s]=!1);r[n]=o,e.userIsReadMsg=r}},actions:{SET_UNREAD_NEWS:function(e,t){(0,e.commit)("setUnreadNews",t)},SET_LAST_NEWS:function(e,t){(0,e.commit)("setLastNews",t)},SET_USER_IS_READ_MSG:function(e,t){(0,e.commit)("setUserIsReadMsg",t)}}},ye=n("Gu7T"),we=n.n(ye),be={namespaced:!0,state:{sysUsers:JSON.parse(window.localStorage.getItem("sysusers")),isToCoArtBoard:!1,isVideoing:!1,isAudioing:!1,currentConversation:{},agreeFriendValidate:!1,recentConversation:[],onlineUser:[],allConversation:[],allFriends:[]},mutations:{setSysUsers:function(e,t){e.sysUsers=t;var n=V()(t);window.localStorage.setItem("sysusers",n)},setIsToCoArtBoard:function(e,t){e.isToCoArtBoard=t},setIsAudioing:function(e,t){e.isAudioing=t},setIsVideoing:function(e,t){e.isVideoing=t},setCurrentConversation:function(e,t){e.currentConversation=t},setAgreeFriendValidate:function(e,t){e.agreeFriendValidate=t},setRecentConversation:function(e,t){var n=t.data;if("init"===t.type)e.recentConversation=n;else if("add"===t.type){var o=e.recentConversation.map(function(e){return e._id}).includes(n._id)?[].concat(we()(e.recentConversation)):[].concat(we()(e.recentConversation),[n]);e.recentConversation=o}else if("delete"===t.type){var r=e.recentConversation.findIndex(function(e){return e._id===n._id}),s=JSON.parse(V()(e.recentConversation));-1!==r&&s.splice(r,1),e.recentConversation=s}},setOnlineUser:function(e,t){e.onlineUser=t},setAllConversation:function(e,t){e.allConversation=[].concat(we()(e.allConversation),we()(t))},setAllFriends:function(e,t){var n=t.resource,o=t.type;console.log("setFriend",t),"init"===o?e.allFriends=n:"delete"===o&&(e.allFriends=(e.allFriends||[]).filter(function(e){return e._id!==n}))}},actions:{SET_SYS_USERS:function(e,t){(0,e.commit)("setSysUsers",t)},SET_ISTOCOARTBOARD:function(e,t){(0,e.commit)("setIsToCoArtBoard",t)},SET_IS_AUDIOING:function(e,t){(0,e.commit)("setIsAudioing",t)},SET_IS_VIDEOING:function(e,t){(0,e.commit)("setIsVideoing",t)},SET_CURRENT_CONVERSATION:function(e,t){(0,e.commit)("setCurrentConversation",t)},SET_AGREE_FRIEND_VALIDATE:function(e,t){(0,e.commit)("setAgreeFriendValidate",t)},SET_RECENT_CONVERSATION:function(e,t){(0,e.commit)("setRecentConversation",t)},SET_ONLINE_USER:function(e,t){(0,e.commit)("setOnlineUser",t)},SET_ALL_CONVERSATION:function(e,t){(0,e.commit)("setAllConversation",t)},SET_ALL_FRIENDS:function(e,t){(0,e.commit)("setAllFriends",t)}}},_e=n("UzK0"),Ce=new W.a,Se=function(e,t){if(_e.a.test(e)&&_e.a.test(t)){var n="";e=Object(W.d)(e),t=Object(W.d)(t);for(var o=1;o<=10;o++)n+="--primary-color-"+o+": rgba("+e.r+", "+e.g+", "+e.b+", "+o/10+");",n+="--primary-bgcolor-"+o+": rgba("+t.r+", "+t.g+", "+t.b+", "+o/10+");";document.documentElement.style.cssText=n}},Ie={opacity:Ce.getJson("theme-opacity")||.75,blur:Ce.getJson("theme-blur")||10,bgImg:Ce.getStr("theme-bgimg")||"abstract",notifySound:Ce.getStr("theme-notifysound")||"default",color:Ce.getStr("theme-color")||"#000",bgColor:Ce.getStr("theme-bgcolor")||"#fff"};Se(Ie.color,Ie.bgColor);var Me,Fe={namespaced:!0,state:Ie,mutations:{setOpacity:function(e,t){Ce.set("theme-opacity",t),e.opacity=t},setBlur:function(e,t){Ce.set("theme-blur",t),e.blur=t},setBgImg:function(e,t){Ce.set("theme-bgimg",t),e.bgImg=t},setNotifySound:function(e,t){Ce.set("theme-notifysound",t),e.notifySound=t},setColor:function(e,t){Ce.set("theme-color",t),e.color=t,Se(e.color,e.bgColor)},setBgColor:function(e,t){Ce.set("theme-bgcolor",t),e.bgColor=t,Se(e.color,e.bgColor)}},actions:{SET_OPACITY:function(e,t){(0,e.commit)("setOpacity",t)},SET_BLUR:function(e,t){(0,e.commit)("setBlur",t)},SET_BG_IMG:function(e,t){(0,e.commit)("setBgImg",t)},SET_NOTIFY_SOUND:function(e,t){(0,e.commit)("setNotifySound",t)},SET_COLOR:function(e,t){(0,e.commit)("setColor",t)},SET_BG_COLOR:function(e,t){(0,e.commit)("setBgColor",t)}}},ze={Desktop:"Desktop",Mobile:"Mobile"},Ae={conversation:"conversation",chatArea:"chatArea"},xe={deviceType:ze[Object(W.l)()],currentUI:Ae.conversation};xe.deviceType===ze.Mobile&&(document.addEventListener("click",function(e){var t=Object(W.g)(e.target,"conversation-list");Object(W.g)(e.target,"conversationitem__cmp")&&t&&(xe.currentUI=Ae.chatArea)}),(Me=document.createElement("style")).setAttribute("device","mobile"),Me.innerText=".el-message-box {width: auto} !important;",document.querySelector("head").appendChild(Me));var Te={namespaced:!0,state:xe,mutations:{setCurrentUI:function(e,t){e.currentUI=t}},actions:{SET_CURRENT_UI:function(e,t){(0,e.commit)("setCurrentUI",t)}}};s.default.use(P.a);var Ne=new P.a.Store({modules:{user:de,news:he,app:be,theme:Fe,device:Te}});s.default.use(D.a);var Ee=new D.a({routes:[{path:"/",redirect:"/chat",meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:function(){return n.e(6).then(n.bind(null,"lmfZ"))},meta:{deepth:.5}},{path:"/chat",name:"Layout",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"6f/g"))},redirect:"/chat/home",meta:{requiresAuth:!0,keepAlive:!0},children:[{path:"home",name:"Home",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"mlqX"))},meta:{requiresAuth:!0,keepAlive:!0,deepth:1}},{path:"user/:id",name:"UserDetails",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"vA1L"))},meta:{requiresAuth:!0}},{path:"add",name:"Add",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"zr11"))},meta:{requiresAuth:!0}},{path:"setting",name:"Setting",component:function(){return n.e(11).then(n.bind(null,"XWS1"))},meta:{requiresAuth:!0}},{path:"system",name:"System",component:function(){return n.e(9).then(n.bind(null,"P3lM"))},meta:{requiresAuth:!0}},{path:"mzone",name:"MZone",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"vV1m"))},meta:{requiresAuth:!0}},{path:"editor",name:"Editor",component:function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"yXTY"))},meta:{requiresAuth:!0}},{path:"schedule",name:"Schedule",component:function(){return n.e(12).then(n.bind(null,"5oav"))},meta:{requiresAuth:!0}},{path:"blog/:id",name:"BlogInfo",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"rSux"))},meta:{requiresAuth:!0}}]},{path:"*",name:"NotFound",component:function(){return n.e(10).then(n.bind(null,"+H76"))}}]});Ee.beforeEach(function(e,t,n){var o=Ne.state.user.isLogin;e.meta.requiresAuth?o?n():n({path:"/login",query:{redirect:e.fullPath}}):n()});var Le=Ee,$e={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toast",class:this.type?"toast--"+this.type:""},[t("p",[this._v(this._s(this.content))])])},staticRenderFns:[]};var ke=n("VU/8")({name:"Toast",data:function(){return{type:"",content:""}},mounted:function(){}},$e,!1,function(e){n("TTHM")},"data-v-716897a0",null).exports,Oe=s.default.extend(ke),Ue=void 0,Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ue=new Oe({data:e}).$mount(),document.body.appendChild(Ue.$el)};["success","error"].forEach(function(e){Re[e]=function(t){return t.type=e,Re(t)}});var qe=Re,Be=n("BO1k"),De=n.n(Be),Pe=n("d7EF"),Ge=n.n(Pe),Ve=n("W3Iv"),je=n.n(Ve),Ye={css:function(e,t){var n=t.value,o=je()(n),r=!0,s=!1,i=void 0;try{for(var a,u=De()(o);!(r=(a=u.next()).done);r=!0){var c=a.value,l=Ge()(c,2),d=l[0],f=l[1];e.style[d]=f,"background-image"!==d&&"backgroundImage"!==d||(e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover")}}catch(e){s=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw i}}},bgImage:function(e,t){e.style.backgroundImage="url(http://47.106.175.18:9000/"+t.value+")",e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="cover",e.style.backgroundPosition="center"},copy:{bind:function(e,t){var n=t.value;e.$value=n,e.handler=function(){if(e.$value){var t=document.createElement("textarea");t.readOnly="readonly",t.style.position="absolute",t.style.left="-9999px",t.value=e.$value,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy")&&i.Message.success("复制成功！"),document.body.removeChild(t)}},e.addEventListener("click",e.handler)}}},He=n("kD8Z");n("f8xf"),n("sKsD"),n("sO0D");s.default.use(a.a),s.default.use(c.a),s.default.use(m.a),s.default.component("full-calendar",p.a),c.a.initAMapApiLoader({key:He.c,plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor"],v:"1.4.4"}),s.default.use(new d.a({connection:"http://47.106.175.18:9000/"})),r()(Ye).forEach(function(e){return s.default.directive(e,Ye[e])}),s.default.config.productionTip=!1,s.default.prototype.$toast=qe,s.default.prototype.$http=le,s.default.prototype.$eventBus=new s.default,new s.default({el:"#app",router:Le,store:Ne,render:function(e){return e(B)}}).$mount("#app")},TTHM:function(e,t){},UzK0:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/},cVXI:function(e,t){},efOk:function(e,t){},f8xf:function(e,t){},kD8Z:function(e,t,n){"use strict";n.d(t,"h",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"k",function(){return u}),n.d(t,"l",function(){return c}),n.d(t,"n",function(){return l}),n.d(t,"j",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return g}),n.d(t,"o",function(){return m}),n.d(t,"p",function(){return v}),n.d(t,"g",function(){return h}),n.d(t,"i",function(){return y}),n.d(t,"d",function(){return w}),n.d(t,"b",function(){return b});var o=n("Dd8w"),r=n.n(o),s={friend:"FRIEND",group:"GROUP"},i="1.0.0",a="704b3b5e984fa3b6185c3f012da42547",u=[{id:1,label:"人",value:"friend"},{id:2,label:"群",value:"group"}],c={friend:[{id:1,label:"Chat账号",value:"code"},{id:2,label:"用户账号",value:"name"},{id:3,label:"昵称",value:"nickname"}],group:[{id:1,label:"Chat账号",value:"code"},{id:2,label:"名称",value:"title"}]},l={applyFriend:"请求添加你为好友",applyGroup:"请求加入群聊"},d="http://blog.static.chenr.cn/",f={error:"error",next:"next",complete:"complete"},p=[{name:"圆",type:"arc"},{name:"线条",type:"line"},{name:"矩形",type:"rect"},{name:"多边形",type:"polygon"},{name:"橡皮擦",type:"eraser"},{name:"撤回",type:"cancel"},{name:"前进",type:"go"},{name:"清屏",type:"clear"},{name:"线宽",type:"lineWidth"},{name:"颜色",type:"color"}],g={agree:"agree",disagree:"disagree",busy:"busy"},m={"阴":"icon-tianqi","多云":"icon-tianqi1","晴":"icon-ziyuan","小雨下雨":"icon-n1"},v={0:"星期天",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},h="黑猫警长提示您文明发言",y={pictures:["http://blog.static.chenr.cn/cc-messger-1702f38162c-92.jpeg"],readCount:0,_id:"5e3ea3518160c54408d9ba13",userId:{photo:"/uploads/2019-11-10/f-1573390856438-f1573390856092.png",signature:"signature",nickname:"nickname",_id:"5d9d903f49db3825a8e76a03"},createDate:new Date,content:"content",__v:0},w={artBoard:"artBoard",video:"video",audio:"audio"},b=r()({},w,{sys:"sys",text:"text",img:"img",file:"file"})},mlBV:function(e,t){},pw1w:function(e,t){},q2Iq:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var o=n("lbHh"),r=n.n(o),s=function(e){r.a.set("authorization",e)},i=function(){return r.a.get("authorization")},a=function(){return r.a.remove("authorization")}},"ry+G":function(e,t){},sKsD:function(e,t){},sO0D:function(e,t){},sk7Q:function(e,t){},tNFE:function(e,t){},tvR6:function(e,t){},uMhA:function(e,t){},zvae:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={add:"ADD",clear:"CLEAR",replace:"REPLACE"}}},["NHnr"]);
//# sourceMappingURL=app.0f358a76fabc80b28e24.js.map