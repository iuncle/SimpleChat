{"version":3,"sources":["webpack:///src/views/MZone/blogMetaDialog.vue","webpack:///./src/views/MZone/blogMetaDialog.vue?5794","webpack:///./src/views/MZone/blogMetaDialog.vue","webpack:///src/views/MZone/editorBlog.vue","webpack:///./src/views/MZone/editorBlog.vue?0082","webpack:///./src/views/MZone/editorBlog.vue"],"names":["blogMetaDialog","data","qiniuToken","categoryList","currentCate","tagList","selectedTags","blogDesc","blogCover","methods","getBlogCategory","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","wrap","_context","prev","next","$http","sent","status","$emit","getBlogTag","stop","_this2","_callee2","_ref2","_context2","_id","setCurrentCate","cate","selectTag","tagItem","index","findIndex","item","splice","push","setCover","cover","getCover","res","console","log","src_const","key","setShow","flag","publish","watch","desc","components","partTitle","uploadImg","customUploadImg","mounted","_this3","getQiniuToken","then","MZone_blogMetaDialog","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","_v","attrs","text","placeholder","type","model","value","callback","$$v","expression","directives","name","rawName","title","src","alt","useType","getStatus","token","scopedSlots","_u","fn","slotProps","icon","trigger","_l","class","_s","includes","effect","size","closable","close","staticRenderFns","editorBlog","showDialog","blogParams","category","tags","content","computed","userInfo","$store","state","user","setBlogParams","hasOwnProperty","params","assign_default","authorId","publishBlog","$confirm","confirmButtonText","cancelButtonText","$router","go","catch","metaChange","setShowDialog","$message","message","metaDialog","__webpack_require__","normalizeComponent","ssrContext","MZone_editorBlog","$set","change","editorBlog_Component","editorBlog_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/8.7214a850e8913b6075c8.js","sourcesContent":["<template>\r\n  <div class=\"blog-meta-dialog-cmp all0\">\r\n    <div class=\"dialog-content hor-ver-center\">\r\n      <i class=\"el-icon-close p-r-t\" @click=\"setShow(false)\"></i>\r\n      <div class=\"meta-list\">\r\n        <div class=\"meta-item\">\r\n          <part-title text=\"文章描述\" />\r\n          <el-input placeholder=\"请输入文章描述\" type=\"textarea\" v-model=\"blogDesc\" />\r\n        </div>\r\n        <div class=\"meta-item cover\">\r\n          <part-title text=\"文章封面\" />\r\n          <div class=\"img-content\" v-show=\"blogCover\">\r\n            <i class=\"el-icon-close\" title=\"删除封面\" @click=\"setCover('')\"></i>\r\n            <img class=\"img\" :src=\"blogCover\" alt=\"\">          \r\n          </div>\r\n          <div class=\"upload-cover\" v-show=\"!blogCover\">\r\n            <uploadImg useType=\"slot\" :getStatus=\"getCover\" :token=\"qiniuToken\">\r\n              <template slot-scope=\"slotProps\">\r\n                <el-button type=\"primary\" icon=\"el-icon-upload\" @click=\"slotProps.trigger\">上传博客封面</el-button>\r\n              </template>\r\n            </uploadImg>\r\n          </div>\r\n        </div>\r\n        <div class=\"meta-item cate-tag\">\r\n          <part-title text=\"文章分类及标签\" />\r\n          <div class=\"category item\">\r\n            <span\r\n              :class=\"currentCate._id === item._id ? 'cate-item isactive' : 'cate-item'\"\r\n              v-for=\"item in categoryList\"\r\n              :key=\"item._id\"\r\n              @click=\"setCurrentCate(item)\"\r\n            >\r\n              {{ item.name }}\r\n            </span>\r\n          </div>\r\n          <div class=\"tag item\">\r\n            <span\r\n              :class=\"selectedTags.includes(item.name) ? 'tag-item isselected' : 'tag-item'\"\r\n              v-for=\"item in tagList\"\r\n              :key=\"item._id\"\r\n              @click=\"selectTag(item)\"\r\n            >\r\n              <el-tag\r\n                type=\"success\"\r\n                :effect=\"selectedTags.includes(item.name) ? 'dark' : 'plain'\"\r\n              >{{item.name}}</el-tag>\r\n            </span>\r\n          </div>\r\n          <div class=\"tag item\">\r\n            已选标签：\r\n            <span\r\n              class=\"tag-item\"\r\n              v-for=\"item in selectedTags\"\r\n              :key=\"item\"\r\n            >\r\n              <el-tag size=\"small\" closable @close=\"selectTag(item)\">{{item.name}}</el-tag>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"footer\">\r\n        <el-button type=\"text\" @click=\"setShow(false)\">取消</el-button>\r\n        <el-button type=\"info\">存为草稿</el-button>\r\n        <el-button type=\"primary\" @click=\"publish\">发表博客</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport partTitle from '@/components/partTitle'\r\nimport uploadImg from '@/components/customUploadImg'\r\nimport { qiniu_URL } from '@/const'\r\nexport default {\r\n  data() {\r\n    return {\r\n      qiniuToken: '',\r\n      categoryList: [],\r\n      currentCate: {},\r\n      tagList: [],\r\n      selectedTags: [],\r\n      blogDesc: '',\r\n      blogCover: ''\r\n    }\r\n  },\r\n  methods: {\r\n    async getBlogCategory() {\r\n      const { data } = await this.$http.getBlogCategory()\r\n      if (data.status === 2000) {\r\n        this.categoryList = data.data\r\n        this.currentCate = this.categoryList[0]\r\n        this.$emit('change', 'category', this.currentCate)\r\n        this.getBlogTag()\r\n      }\r\n    },\r\n    async getBlogTag() {\r\n      const { data } = await this.$http.getBlogTag(this.currentCate._id)\r\n      if (data.status === 2000) {\r\n        this.tagList = data.data\r\n      }\r\n    },\r\n    setCurrentCate(cate) {\r\n      this.currentCate = cate\r\n      this.$emit('change', 'category', this.currentCate)\r\n      this.getBlogTag()\r\n    },\r\n    selectTag(tagItem) {\r\n      // const name = item\r\n      const selectedTags = this.selectedTags || []\r\n      const index = selectedTags.findIndex(item => item._id === tagItem._id)\r\n      if (index !== -1) {\r\n        selectedTags.splice(index, 1)\r\n      } else {\r\n        selectedTags.push(tagItem)\r\n      }\r\n      this.$emit('change', 'tags', this.selectedTags)\r\n    },\r\n    setCover(cover) {\r\n      this.blogCover = cover\r\n      this.$emit('change', 'cover', this.blogCover)\r\n    },\r\n    getCover(res) {\r\n      console.log(res)\r\n      if (res.status === 'complete') {\r\n        const cover = qiniu_URL + res.data.key\r\n        this.setCover(cover)\r\n      }\r\n    },\r\n    setShow(flag) {\r\n      this.$emit('setShow', flag)\r\n    },\r\n    publish() {\r\n      this.$emit('publish')\r\n    }\r\n  },\r\n  watch: {\r\n    blogDesc(desc) {\r\n      this.$emit('change', 'desc', this.blogDesc)\r\n    }\r\n  },\r\n  components: {\r\n    partTitle,\r\n    uploadImg\r\n  },\r\n  mounted() {\r\n    this.getBlogCategory()\r\n    this.$http.getQiniuToken().then(res => {\r\n      const { data } = res\r\n      this.qiniuToken = data.data\r\n    })\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import './../../../static/css/var.scss';\r\n.blog-meta-dialog-cmp {\r\n  position: fixed;\r\n  z-index: 2104;\r\n  background-color: rgba(0, 0, 0, .4);\r\n  .dialog-content {\r\n    width: 600px;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n    border-radius: 10px;\r\n    .meta-list {\r\n      .meta-item {\r\n        margin-top: 10px;\r\n        &:first-child {\r\n          margin-top: 0;\r\n        }\r\n      }\r\n      .cate-tag {\r\n        .item {\r\n          margin-top: 10px;\r\n        }\r\n        .category {\r\n          color: $normalfont;\r\n          .cate-item {\r\n            margin-left: 10px;\r\n            cursor: pointer;\r\n            &:first-child {\r\n              margin-left: 0;\r\n            }\r\n            &.isactive {\r\n              color: $primarycolor;\r\n            }\r\n          }\r\n        }\r\n        .tag {\r\n          .tag-item {\r\n            display: inline-block;\r\n            margin: 0 10px 10px 0;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .cover {\r\n        .img-content {\r\n          position: relative;\r\n          width: 300px;\r\n          height: 200px;\r\n          .img {\r\n            width: 100%;\r\n            height: 100%;\r\n          }\r\n          .el-icon-close {\r\n            position: absolute;\r\n            top: 0;\r\n            right: 0;\r\n            background-color: rgba(0, 0, 0, .4);\r\n            color: #fff;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .footer {\r\n      margin-top: 20px;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/MZone/blogMetaDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blog-meta-dialog-cmp all0\"},[_c('div',{staticClass:\"dialog-content hor-ver-center\"},[_c('i',{staticClass:\"el-icon-close p-r-t\",on:{\"click\":function($event){_vm.setShow(false)}}}),_vm._v(\" \"),_c('div',{staticClass:\"meta-list\"},[_c('div',{staticClass:\"meta-item\"},[_c('part-title',{attrs:{\"text\":\"文章描述\"}}),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入文章描述\",\"type\":\"textarea\"},model:{value:(_vm.blogDesc),callback:function ($$v) {_vm.blogDesc=$$v},expression:\"blogDesc\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"meta-item cover\"},[_c('part-title',{attrs:{\"text\":\"文章封面\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.blogCover),expression:\"blogCover\"}],staticClass:\"img-content\"},[_c('i',{staticClass:\"el-icon-close\",attrs:{\"title\":\"删除封面\"},on:{\"click\":function($event){_vm.setCover('')}}}),_vm._v(\" \"),_c('img',{staticClass:\"img\",attrs:{\"src\":_vm.blogCover,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.blogCover),expression:\"!blogCover\"}],staticClass:\"upload-cover\"},[_c('uploadImg',{attrs:{\"useType\":\"slot\",\"getStatus\":_vm.getCover,\"token\":_vm.qiniuToken},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload\"},on:{\"click\":slotProps.trigger}},[_vm._v(\"上传博客封面\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"meta-item cate-tag\"},[_c('part-title',{attrs:{\"text\":\"文章分类及标签\"}}),_vm._v(\" \"),_c('div',{staticClass:\"category item\"},_vm._l((_vm.categoryList),function(item){return _c('span',{key:item._id,class:_vm.currentCate._id === item._id ? 'cate-item isactive' : 'cate-item',on:{\"click\":function($event){_vm.setCurrentCate(item)}}},[_vm._v(\"\\n            \"+_vm._s(item.name)+\"\\n          \")])})),_vm._v(\" \"),_c('div',{staticClass:\"tag item\"},_vm._l((_vm.tagList),function(item){return _c('span',{key:item._id,class:_vm.selectedTags.includes(item.name) ? 'tag-item isselected' : 'tag-item',on:{\"click\":function($event){_vm.selectTag(item)}}},[_c('el-tag',{attrs:{\"type\":\"success\",\"effect\":_vm.selectedTags.includes(item.name) ? 'dark' : 'plain'}},[_vm._v(_vm._s(item.name))])],1)})),_vm._v(\" \"),_c('div',{staticClass:\"tag item\"},[_vm._v(\"\\n          已选标签：\\n          \"),_vm._l((_vm.selectedTags),function(item){return _c('span',{key:item,staticClass:\"tag-item\"},[_c('el-tag',{attrs:{\"size\":\"small\",\"closable\":\"\"},on:{\"close\":function($event){_vm.selectTag(item)}}},[_vm._v(_vm._s(item.name))])],1)})],2)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.setShow(false)}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"}},[_vm._v(\"存为草稿\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发表博客\")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-db101ba6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/MZone/blogMetaDialog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-db101ba6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./blogMetaDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./blogMetaDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./blogMetaDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-db101ba6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./blogMetaDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/MZone/blogMetaDialog.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"editor-blog\">\r\n    <div class=\"header\">\r\n      <el-input v-model=\"blogParams.title\" />\r\n      <el-button class=\"publish-btn\" @click=\"setShowDialog(true)\" type=\"primary\">发表博客</el-button>\r\n    </div>\r\n    <div class=\"editor-area\">\r\n      <mavon-editor v-model=\"blogParams.content\" class=\"container\"/>\r\n    </div>\r\n    <meta-dialog @change=\"metaChange\" @setShow=\"setShowDialog\" @publish=\"publish\" v-show=\"showDialog\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport metaDialog from './blogMetaDialog'\r\nexport default {\r\n  name: 'Editor',\r\n  data() {\r\n    return {\r\n      showDialog: false,\r\n      blogParams: {\r\n        category: '',\r\n        tags: [],\r\n        cover: '',\r\n        title: '',\r\n        content: '',\r\n        desc: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.user.userInfo\r\n    }\r\n  },\r\n  methods: {\r\n    setBlogParams() {\r\n      for (const key in this.blogParams) {\r\n        if (this.blogParams.hasOwnProperty(key)) {\r\n          this.blogParams[key] = ''\r\n        }\r\n      }\r\n    },\r\n    async publish() {\r\n      const params = Object.assign({}, this.blogParams, {authorId: this.userInfo._id})\r\n      const { data } = await this.$http.publishBlog(params)\r\n      this.setBlogParams()\r\n      if (data.status === 2000) {\r\n        this.$confirm('恭喜你，发布成功！', '提示', {\r\n          confirmButtonText: '回到列表',\r\n          cancelButtonText: '再写一篇',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.$router.go(-1)\r\n        }).catch(() => {\r\n               \r\n        })\r\n      }\r\n    },\r\n    metaChange(type, value) {\r\n      this.blogParams[type] = value\r\n    },\r\n    setShowDialog(flag) {\r\n      const blogParams = this.blogParams\r\n      if (!blogParams.title || !blogParams.content) {\r\n        this.$message({type: 'error', message: '信息未填写完整！'})\r\n        return\r\n      }\r\n      this.showDialog = flag\r\n    }\r\n  },\r\n  components: {\r\n    metaDialog\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.editor-blog {\r\n  height: 100%;\r\n  padding: 10px;\r\n  .header {\r\n    display: flex;\r\n    margin-bottom: 10px;\r\n    .publish-btn {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n  .editor-area {\r\n    height: calc(100% - 50px);\r\n    .v-note-wrapper.shadow {\r\n      height: 100%;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/MZone/editorBlog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-blog\"},[_c('div',{staticClass:\"header\"},[_c('el-input',{model:{value:(_vm.blogParams.title),callback:function ($$v) {_vm.$set(_vm.blogParams, \"title\", $$v)},expression:\"blogParams.title\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"publish-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.setShowDialog(true)}}},[_vm._v(\"发表博客\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"editor-area\"},[_c('mavon-editor',{staticClass:\"container\",model:{value:(_vm.blogParams.content),callback:function ($$v) {_vm.$set(_vm.blogParams, \"content\", $$v)},expression:\"blogParams.content\"}})],1),_vm._v(\" \"),_c('meta-dialog',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDialog),expression:\"showDialog\"}],on:{\"change\":_vm.metaChange,\"setShow\":_vm.setShowDialog,\"publish\":_vm.publish}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ab1b68f0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/MZone/editorBlog.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ab1b68f0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editorBlog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editorBlog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editorBlog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ab1b68f0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editorBlog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/MZone/editorBlog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}